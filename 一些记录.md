##### 问题记录
- 在model分包情况下,service中使用了mp的service接口类
```java
public interface HospitalSetService extends IService<HospitalSet> {
}
```
在service模块中需要引入model的坐标才可以使用```HospitalSet``实体类
- 在ServiceHospApplication启动时,出现如下报错:
```java
 org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.saimo.yygh.hosp.mapper.HospitalSetMapper' available: expected at least 1 bean which qualifies as autowire candidate
```
因为没有配置扫描mapper
```java
@Configuration
@MapperScan("com.saimo.yygh.hosp.mapper")
public class HospConfig {
}

```
- 关于swagger整合问题
我们的swager配置在```service_utils``模块下,所以在```service_hosp```中使用swagger需要引入该模块
```java
    <dependency>
      <groupId>com.saimo</groupId>
      <artifactId>service_utils</artifactId>
      <version>1.0-SNAPSHOT</version>
    </dependency>
```
在引入之后,我们是如何读取这个配置呢, 在```service_utils``模块下,swagger的配置文件是放在```com.saiomo```下的,所以我们在


```service_hosp```模块的启动类上加上扫包注解```ComponentScan```
```java
@SpringBootApplication
@ComponentScan(basePackages = "com.saimo")
public class ServiceHospApplication {

    public static void main(String[] args) {
        SpringApplication.run(ServiceHospApplication.class, args);
    }
}

```
配置后,访问```http://localhost:8201/sbe/swagger-ui.html```出现405,

因为swagger-ui不支持@RestController(“some”)，只支持@RestController @RequestMapping("some")
```java
@RestController
@RequestMapping("admin/hosp/hospitalSet")
public class HospitalSetController {}
```
- CrossOrigin跨域注解
可以向@RequestMapping注解处理程序方法添加一个@CrossOrigin注解，以便启用CORS（默认情况下，@CrossOrigin允许在@RequestMapping注解中指定的所有源和HTTP方法）
```java
    @CrossOrigin
    @GetMapping("/{id}")
    public Account retrieve(@PathVariable Long id) {}
```
也可以修饰在方法上,表示该方法可跨域

- easyexcel在web中导出
将HttpServletResponse传入service
```java
    @Override
    public void exportData(HttpServletResponse httpResponse) {
        String fileName = "dict";
        //设置下载信息
        httpResponse.setContentType("application/vnd.ms-excel");
        httpResponse.setCharacterEncoding("utf8");
        httpResponse.setHeader("Content-Disposition", "attachment; filename=" + fileName + ".xlsx");
        httpResponse.setHeader("Pragma", "public");
        httpResponse.setHeader("Cache-Control", "no-store");
        httpResponse.addHeader("Cache-Control", "max-age=0");

        //获取信息
        List<Dict> dicts = baseMapper.selectList(null);
        //dict -> DictEeVo
        List<DictEeVo> dictEeVos = new ArrayList<>(dicts.size());
        dicts.forEach(dict -> {
                    DictEeVo dictEeVo = new DictEeVo();
                    BeanUtils.copyProperties(dict, dictEeVo);
                    dictEeVos.add(dictEeVo);
                }
        );
        //将表格数据写入道输出流
        try {
            EasyExcel.write(httpResponse.getOutputStream(), DictEeVo.class).
                    sheet("dict").
                    doWrite(dictEeVos);
        } catch (IOException ioException) {
            ioException.printStackTrace();
        }
    }
```
在controller层中,此时的返回值是void,不需要Result<Void>,否则会抛出一些警告,但不影响导出

警告报错如下:```No converter for [xxx] with preset Content-Type 'application/vnd.ms-excel;charset=utf8'```
```java
    public void exportData(HttpServletResponse httpResponse) {
        dictService.exportData(httpResponse);
    }
```


